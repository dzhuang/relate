
{% from "latex.jinja" import transportation_preamble as preamble %}

<p align="middle">
{% call latex(compiler="pdflatex", image_format="png", tex_preamble=preamble)  %}
    \begin{keytable}[H]\centering \topcaption{}
    \begin{mytabular}{c|cccc|c}\hline\hline \diagbox{产地}{单位运费}{销地}
    & 城市A&城市B&城市C&城市D& 供应量\\ \hline
      代工厂1  & 3&2&4&0&50 \\
      代工厂2  & 2&3&5&0&35 \\
      代工厂3  & 1&4&2&0&45 \\
     \hline
    需求量&30&40&50&10 & 130\\
    \hline\hline
    \end{mytabular}\end{keytable}

                            \noindent\begin{minipage}[c]{0.5\textwidth}
    \parindent 2em
    \def\ori{  {  {1,4,2,0},{2,3,5,0},{3,2,4,0}  }  }
    \def\sremainder{
            \draw (sr0) node{\footnotesize 45};
            \draw (sr1) node{\footnotesize 35};
            \draw (sr2) node{\footnotesize 50};
            }
    \def\dremainder{
            \draw (dr0) node{\footnotesize 30};
            \draw (dr1) node{\footnotesize 40};
            \draw (dr2) node{\footnotesize 50};
            \draw (dr3) node{\footnotesize 10};
            }
    \def\total{\footnotesize 130}

    \begin{keytable}[H]
    \centering
    \topcaption{}
    \def\flows{  {  {"30","","15","",""},{"","","25","10",""},{"","40","10","",""}  }  }
    \begin{tikzpicture}[>=stealth]\draw[thick, draw=black] (0,0) grid (4,3);%%%无运输图
    \draworiginlabel{\ori}{2}{3}
    \drawflow{\flows}{2}{3}
    \sremainder
    \dremainder
    \end{tikzpicture}
    \end{keytable}\end{minipage}%
    \hskip 2em
            \noindent\begin{minipage}[c]{0.5\textwidth}
    \parindent 2em
    检验数表为：

    \begin{keytable}[H]
    \centering \topcaption{检验数表}%\label{tab:jysb1}
    \begin{mytabular}{c||C{2.5em}|C{2.5em}|C{2.5em}|C{2.5em}  }
    \hline\hline
    & $B_1$ & $B_2$ & $B_3$ & $B_4$  \\ \hline\hline

            $A_1$ & 0&&&1\\ \hline
            $A_2$ & -2&-1&&\\ \hline
            $A_3$ & &3&&3\\ \hline
            \hline
    \end{mytabular}
    \end{keytable}\end{minipage}



    \noindent\begin{minipage}[c]{0.5\textwidth}

    \vskip 1em



    \begin{keytable}[H]
    \centering
    \topcaption{}
    \def\flows{  {  {"5","","40","",""},{"25","","","10",""},{"","40","10","",""}  }  }
    \begin{tikzpicture}[>=stealth]\draw[thick, draw=black] (0,0) grid (4,3);%%%无运输图
    \draworiginlabel{\ori}{2}{3}
    \drawflow{\flows}{2}{3}
    \sremainder
    \dremainder
    \end{tikzpicture}
    \end{keytable}\end{minipage}%
    \hskip 2em
            \noindent\begin{minipage}[c]{0.5\textwidth}
    \parindent 2em
    检验数表为：

    \begin{keytable}[H]
    \centering \topcaption{检验数表}%\label{tab:jysb1}
    \begin{mytabular}{c||C{2.5em}|C{2.5em}|C{2.5em}|C{2.5em}  }
    \hline\hline
    & $B_1$ & $B_2$ & $B_3$ & $B_4$  \\ \hline\hline

            $A_1$ & 0&&&-1\\ \hline
            $A_2$ & &2&2&\\ \hline
            $A_3$ & &0&&3\\ \hline
            \hline
    \end{mytabular}
    \end{keytable}\end{minipage}



    \noindent\begin{minipage}[c]{0.5\textwidth}

    \vskip 1em



    \begin{keytable}[H]
    \centering
    \topcaption{}
    \def\flows{  {  {"","","45","",""},{"30","","","5",""},{"","40","5","5",""}  }  }
    \begin{tikzpicture}[>=stealth]\draw[thick, draw=black] (0,0) grid (4,3);%%%无运输图
    \draworiginlabel{\ori}{2}{3}
    \drawflow{\flows}{2}{3}
    \sremainder
    \dremainder
    \end{tikzpicture}
    \end{keytable}\end{minipage}%
    \hskip 2em
            \noindent\begin{minipage}[c]{0.5\textwidth}
    \parindent 2em
    检验数表为：

    \begin{keytable}[H]
    \centering \topcaption{检验数表}%\label{tab:jysb1}
    \begin{mytabular}{c||C{2.5em}|C{2.5em}|C{2.5em}|C{2.5em}  }
    \hline\hline
    & $B_1$ & $B_2$ & $B_3$ & $B_4$  \\ \hline\hline

            $A_1$ & 1&&&\\ \hline
            $A_2$ & &1&1&\\ \hline
            $A_3$ & 0&0&&2\\ \hline
            \hline
    \end{mytabular}
    \end{keytable}
    
    最小总运费为250千元
    
    \end{minipage}




{% endcall %}</p>