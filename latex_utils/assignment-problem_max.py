# -*- coding: utf-8 -*-

from .utils.latex_utils import latex_jinja_env
import numpy as np
import random
from .utils.hungarian import linear_sum_assignment

try:
    # Python 3.x
    from tkinter import Tk
except ImportError:
    # Python 2.x
    from Tkinter import Tk


SAVED_QUESTION = "assignment_max.bin"
STEP_RANGE = [12, 16]
MAX_RETRY_ITERATION = 1000
N = 5
M = 5
r = Tk()
r.withdraw()
r.clipboard_clear()

def is_qualified_question(cost, mem_cost_list, saved_question=SAVED_QUESTION):

    qualified = False
    #r = Tk()
    (row_ind, col_ind), nstep = linear_sum_assignment(cost)

    cost = cost * (-1)

    if nstep in STEP_RANGE:
        qualified = True

    if not qualified:
        # 问题不合格
        return False

    question_exist = False
    for i, c in enumerate(mem_cost_list):
        if np.all(cost==c):
            print("----------------------question exists-------------------")
            question_exist = True
            return False
            break

    if not question_exist:
        suggestion = "cost=%s" % repr(cost*(-1))
        suggestion = suggestion.replace("array", "np.array")
        print(suggestion)
        r.clipboard_append(suggestion)
        r.clipboard_append("\n")
        r.clipboard_append("cost_list.append(cost/10)")
        r.clipboard_append("\n")
        r.clipboard_append("\n")

        #raise ValueError("Please add above problem")

    print(cost)
    print("number of steps:", nstep)

    return True

cost_list = []

cost=np.array([[420, 370, 420, 540, 400],
       [320, 310, 480, 470, 450],
       [490, 390, 310, 330, 390],
       [550, 340, 550, 530, 460],
       [450, 500, 590, 440, 500]])
cost_list.append(cost/10)

cost=np.array([[420, 360, 340, 480, 480],
       [450, 320, 570, 360, 510],
       [340, 300, 390, 330, 300],
       [380, 390, 490, 370, 350],
       [460, 340, 380, 410, 440]])
cost_list.append(cost/10)

cost=np.array([[510, 450, 480, 360, 400],
       [560, 520, 440, 390, 570],
       [370, 450, 520, 330, 310],
       [530, 420, 510, 500, 420],
       [530, 450, 370, 310, 310]])
cost_list.append(cost/10)

cost=np.array([[560, 360, 500, 510, 340],
       [570, 410, 360, 400, 440],
       [510, 340, 330, 390, 580],
       [520, 390, 430, 470, 560],
       [370, 560, 370, 570, 340]])
cost_list.append(cost/10)

cost=np.array([[420, 470, 480, 480, 320],
       [470, 320, 530, 450, 500],
       [310, 570, 390, 590, 490],
       [370, 440, 480, 460, 420],
       [360, 510, 380, 480, 510]])
cost_list.append(cost/10)

cost=np.array([[590, 410, 390, 300, 310],
       [420, 460, 430, 420, 450],
       [350, 380, 360, 500, 520],
       [390, 350, 550, 320, 570],
       [540, 580, 490, 530, 350]])
cost_list.append(cost/10)

cost=np.array([[300, 460, 400, 510, 440],
       [330, 560, 530, 360, 530],
       [560, 400, 360, 300, 450],
       [560, 570, 500, 300, 560],
       [480, 570, 370, 420, 380]])
cost_list.append(cost/10)

cost=np.array([[530, 400, 430, 500, 370],
       [440, 380, 500, 450, 450],
       [500, 470, 330, 520, 450],
       [430, 330, 450, 330, 310],
       [420, 500, 410, 590, 590]])
cost_list.append(cost/10)

cost=np.array([[590, 580, 400, 470, 450],
       [440, 590, 370, 500, 330],
       [500, 330, 550, 450, 530],
       [400, 350, 470, 460, 410],
       [410, 440, 360, 560, 470]])
cost_list.append(cost/10)

cost=np.array([[390, 440, 310, 590, 510],
       [540, 390, 330, 560, 560],
       [570, 380, 380, 510, 470],
       [580, 360, 300, 470, 540],
       [310, 380, 360, 370, 520]])
cost_list.append(cost/10)

cost=np.array([[570, 480, 530, 410, 560],
       [490, 450, 530, 350, 300],
       [410, 460, 530, 430, 490],
       [480, 500, 450, 370, 420],
       [380, 460, 570, 360, 300]])
cost_list.append(cost/10)

cost=np.array([[300, 380, 570, 520, 350],
       [420, 470, 560, 400, 480],
       [560, 580, 520, 300, 360],
       [390, 560, 490, 430, 320],
       [310, 360, 570, 580, 590]])
cost_list.append(cost/10)

cost=np.array([[400, 410, 380, 360, 470],
       [570, 360, 420, 560, 420],
       [520, 500, 540, 510, 550],
       [360, 350, 350, 410, 460],
       [440, 470, 520, 310, 510]])
cost_list.append(cost/10)

cost=np.array([[360, 490, 330, 380, 390],
       [570, 520, 360, 590, 470],
       [450, 490, 340, 380, 350],
       [480, 440, 360, 440, 310],
       [410, 310, 320, 370, 540]])
cost_list.append(cost/10)

cost=np.array([[560, 500, 390, 490, 560],
       [530, 520, 430, 470, 400],
       [460, 430, 580, 350, 300],
       [460, 400, 340, 430, 540],
       [300, 480, 410, 490, 520]])
cost_list.append(cost/10)

cost=np.array([[580, 540, 410, 530, 510],
       [560, 420, 390, 570, 530],
       [350, 490, 330, 380, 320],
       [470, 560, 500, 450, 510],
       [410, 540, 560, 540, 370]])
cost_list.append(cost/10)

cost=np.array([[320, 380, 520, 490, 550],
       [350, 330, 590, 530, 400],
       [590, 430, 380, 490, 400],
       [380, 450, 570, 450, 390],
       [490, 370, 340, 400, 520]])
cost_list.append(cost/10)

cost=np.array([[500, 550, 400, 480, 380],
       [590, 580, 480, 450, 470],
       [570, 420, 400, 410, 310],
       [590, 340, 580, 460, 380],
       [530, 570, 490, 410, 520]])
cost_list.append(cost/10)

cost=np.array([[460, 510, 460, 340, 380],
       [580, 480, 440, 400, 310],
       [510, 400, 580, 360, 470],
       [480, 540, 330, 300, 320],
       [390, 580, 540, 440, 560]])
cost_list.append(cost/10)

cost=np.array([[590, 550, 540, 410, 590],
       [470, 570, 560, 490, 580],
       [380, 430, 300, 490, 510],
       [500, 440, 420, 360, 500],
       [540, 580, 450, 520, 560]])
cost_list.append(cost/10)

cost=np.array([[590, 340, 510, 350, 450],
       [550, 570, 400, 430, 330],
       [430, 360, 410, 410, 350],
       [470, 520, 520, 470, 330],
       [310, 490, 520, 430, 520]])
cost_list.append(cost/10)

cost=np.array([[570, 450, 500, 540, 440],
       [300, 340, 500, 310, 350],
       [450, 390, 530, 300, 450],
       [540, 430, 500, 310, 320],
       [440, 450, 500, 550, 340]])
cost_list.append(cost/10)

cost=np.array([[420, 340, 540, 520, 460],
       [500, 470, 420, 380, 520],
       [430, 390, 320, 430, 540],
       [380, 430, 300, 440, 340],
       [390, 510, 370, 570, 420]])
cost_list.append(cost/10)

cost=np.array([[570, 550, 370, 530, 590],
       [580, 550, 520, 460, 350],
       [510, 500, 370, 480, 360],
       [350, 340, 500, 410, 390],
       [590, 510, 490, 480, 440]])
cost_list.append(cost/10)

cost=np.array([[310, 510, 370, 490, 440],
       [450, 510, 420, 580, 360],
       [440, 540, 370, 380, 540],
       [310, 570, 490, 390, 330],
       [340, 390, 390, 490, 430]])
cost_list.append(cost/10)

cost=np.array([[530, 310, 300, 300, 380],
       [470, 390, 480, 500, 480],
       [480, 360, 330, 580, 390],
       [420, 580, 300, 360, 490],
       [300, 310, 410, 560, 340]])
cost_list.append(cost/10)

cost=np.array([[510, 500, 310, 500, 500],
       [310, 470, 460, 360, 480],
       [370, 510, 440, 330, 320],
       [560, 480, 370, 480, 540],
       [520, 520, 520, 420, 300]])
cost_list.append(cost/10)

cost=np.array([[330, 560, 440, 550, 500],
       [390, 360, 400, 350, 520],
       [390, 330, 340, 410, 550],
       [440, 540, 560, 490, 510],
       [330, 590, 540, 420, 510]])
cost_list.append(cost/10)

cost=np.array([[420, 390, 530, 450, 380],
       [500, 480, 580, 460, 410],
       [530, 300, 510, 370, 520],
       [420, 340, 390, 480, 390],
       [410, 400, 390, 490, 550]])
cost_list.append(cost/10)

cost=np.array([[460, 480, 420, 300, 470],
       [440, 580, 560, 320, 420],
       [500, 300, 320, 510, 410],
       [490, 350, 380, 530, 330],
       [440, 550, 450, 470, 390]])
cost_list.append(cost/10)

cost=np.array([[490, 540, 310, 390, 450],
       [500, 530, 480, 390, 530],
       [520, 590, 430, 320, 440],
       [330, 300, 580, 550, 340],
       [370, 500, 300, 570, 470]])
cost_list.append(cost/10)

cost=np.array([[500, 420, 320, 400, 450],
       [430, 490, 490, 490, 420],
       [360, 480, 300, 460, 560],
       [340, 350, 300, 540, 560],
       [330, 370, 470, 420, 530]])
cost_list.append(cost/10)

cost=np.array([[430, 570, 450, 490, 480],
       [300, 370, 330, 390, 520],
       [360, 390, 510, 360, 580],
       [360, 430, 500, 300, 530],
       [590, 350, 450, 500, 390]])
cost_list.append(cost/10)

cost=np.array([[440, 450, 350, 420, 400],
       [330, 550, 560, 310, 580],
       [510, 520, 300, 450, 410],
       [490, 430, 580, 380, 470],
       [330, 370, 560, 510, 590]])
cost_list.append(cost/10)

cost=np.array([[300, 310, 590, 390, 470],
       [320, 310, 400, 530, 570],
       [310, 420, 590, 490, 440],
       [410, 560, 420, 430, 380],
       [300, 370, 360, 580, 490]])
cost_list.append(cost/10)

cost=np.array([[360, 520, 580, 430, 330],
       [580, 590, 350, 300, 500],
       [400, 390, 300, 430, 430],
       [520, 490, 530, 530, 330],
       [570, 330, 380, 500, 320]])
cost_list.append(cost/10)

cost=np.array([[490, 390, 340, 580, 460],
       [380, 500, 540, 530, 330],
       [570, 310, 400, 460, 560],
       [370, 580, 420, 520, 340],
       [530, 320, 380, 380, 370]])
cost_list.append(cost/10)

cost=np.array([[500, 550, 390, 430, 380],
       [570, 470, 340, 420, 410],
       [580, 550, 430, 470, 450],
       [430, 450, 560, 330, 340],
       [490, 390, 300, 440, 360]])
cost_list.append(cost/10)

cost=np.array([[440, 380, 500, 310, 380],
       [500, 490, 490, 340, 430],
       [390, 400, 490, 450, 530],
       [510, 520, 530, 540, 440],
       [300, 470, 530, 560, 510]])
cost_list.append(cost/10)

cost=np.array([[490, 560, 390, 520, 460],
       [540, 490, 450, 350, 340],
       [400, 480, 480, 590, 490],
       [570, 500, 330, 530, 430],
       [310, 560, 480, 580, 540]])
cost_list.append(cost/10)

cost=np.array([[540, 540, 370, 300, 570],
       [450, 330, 330, 470, 300],
       [340, 350, 300, 370, 350],
       [440, 450, 440, 570, 410],
       [400, 440, 320, 510, 470]])
cost_list.append(cost/10)

cost=np.array([[550, 510, 430, 320, 560],
       [330, 340, 570, 410, 590],
       [410, 470, 560, 350, 450],
       [540, 300, 330, 330, 580],
       [520, 450, 500, 570, 560]])
cost_list.append(cost/10)

cost=np.array([[510, 330, 400, 550, 310],
       [340, 320, 560, 550, 540],
       [460, 350, 370, 440, 440],
       [450, 400, 400, 590, 460],
       [470, 540, 520, 340, 330]])
cost_list.append(cost/10)

cost=np.array([[390, 400, 370, 400, 530],
       [460, 500, 350, 410, 520],
       [350, 490, 330, 470, 480],
       [500, 300, 500, 520, 570],
       [330, 380, 350, 550, 590]])
cost_list.append(cost/10)

cost=np.array([[340, 300, 470, 310, 530],
       [530, 460, 580, 420, 480],
       [400, 420, 570, 400, 430],
       [450, 320, 360, 370, 530],
       [320, 330, 490, 340, 480]])
cost_list.append(cost/10)

cost=np.array([[430, 350, 320, 320, 360],
       [400, 540, 430, 430, 490],
       [340, 320, 400, 360, 410],
       [560, 500, 300, 360, 420],
       [470, 370, 300, 310, 470]])
cost_list.append(cost/10)

cost=np.array([[300, 360, 320, 530, 560],
       [410, 490, 330, 480, 590],
       [350, 460, 470, 460, 420],
       [400, 480, 480, 310, 520],
       [400, 440, 440, 380, 540]])
cost_list.append(cost/10)

cost=np.array([[320, 300, 440, 470, 450],
       [370, 490, 420, 550, 310],
       [360, 510, 440, 490, 300],
       [310, 420, 420, 450, 450],
       [340, 330, 400, 450, 510]])
cost_list.append(cost/10)

cost=np.array([[520, 590, 420, 320, 300],
       [550, 330, 580, 500, 400],
       [410, 440, 500, 540, 360],
       [440, 380, 360, 570, 420],
       [430, 560, 490, 430, 350]])
cost_list.append(cost/10)

cost=np.array([[570, 360, 430, 470, 380],
       [370, 310, 310, 360, 380],
       [350, 560, 570, 340, 340],
       [540, 500, 510, 460, 490],
       [440, 360, 360, 590, 400]])
cost_list.append(cost/10)

cost=np.array([[340, 400, 310, 440, 510],
       [450, 560, 510, 370, 470],
       [370, 580, 430, 480, 360],
       [430, 330, 300, 580, 380],
       [500, 590, 560, 580, 420]])
cost_list.append(cost/10)

cost=np.array([[470, 520, 480, 540, 300],
       [480, 540, 400, 430, 420],
       [450, 380, 520, 390, 420],
       [400, 340, 580, 530, 360],
       [460, 390, 580, 400, 520]])
cost_list.append(cost/10)

cost=np.array([[410, 530, 550, 450, 440],
       [560, 330, 590, 370, 300],
       [420, 410, 380, 360, 350],
       [500, 550, 560, 590, 400],
       [500, 510, 320, 490, 360]])
cost_list.append(cost/10)

cost=np.array([[410, 420, 360, 590, 500],
       [580, 440, 530, 320, 480],
       [560, 470, 460, 500, 540],
       [560, 460, 520, 370, 570],
       [590, 420, 510, 410, 390]])
cost_list.append(cost/10)

cost=np.array([[330, 310, 380, 440, 470],
       [430, 370, 540, 320, 590],
       [510, 420, 510, 320, 350],
       [360, 570, 480, 370, 410],
       [460, 360, 460, 360, 540]])
cost_list.append(cost/10)

cost=np.array([[300, 580, 380, 510, 470],
       [510, 570, 560, 550, 300],
       [570, 520, 480, 430, 520],
       [530, 520, 360, 420, 350],
       [550, 530, 570, 580, 480]])
cost_list.append(cost/10)

cost=np.array([[400, 500, 530, 540, 320],
       [530, 420, 580, 440, 570],
       [400, 320, 430, 520, 520],
       [560, 470, 550, 350, 450],
       [490, 550, 470, 300, 450]])
cost_list.append(cost/10)

cost=np.array([[540, 380, 340, 580, 380],
       [410, 330, 330, 570, 410],
       [360, 300, 460, 560, 580],
       [350, 330, 300, 350, 490],
       [490, 470, 540, 450, 400]])
cost_list.append(cost/10)

cost=np.array([[550, 550, 360, 590, 580],
       [530, 470, 310, 580, 450],
       [550, 400, 380, 390, 460],
       [570, 480, 520, 370, 450],
       [480, 430, 550, 420, 370]])
cost_list.append(cost/10)

cost=np.array([[430, 330, 550, 430, 440],
       [590, 570, 580, 300, 480],
       [540, 410, 510, 560, 430],
       [440, 380, 380, 410, 300],
       [520, 430, 390, 540, 360]])
cost_list.append(cost/10)

cost=np.array([[420, 410, 440, 380, 550],
       [580, 360, 300, 580, 450],
       [510, 560, 470, 550, 530],
       [530, 570, 460, 480, 550],
       [560, 300, 400, 310, 440]])
cost_list.append(cost/10)

cost=np.array([[420, 440, 440, 420, 310],
       [310, 350, 400, 430, 330],
       [420, 500, 430, 560, 540],
       [440, 520, 420, 580, 440],
       [340, 480, 330, 480, 450]])
cost_list.append(cost/10)

cost=np.array([[300, 470, 450, 570, 430],
       [500, 500, 570, 500, 420],
       [500, 440, 310, 430, 550],
       [340, 540, 330, 380, 360],
       [580, 410, 400, 410, 400]])
cost_list.append(cost/10)

cost=np.array([[410, 460, 350, 520, 460],
       [540, 520, 350, 560, 480],
       [570, 520, 580, 460, 330],
       [310, 470, 310, 470, 340],
       [510, 460, 410, 580, 510]])
cost_list.append(cost/10)

cost=np.array([[510, 350, 410, 560, 590],
       [560, 360, 560, 440, 380],
       [530, 570, 350, 530, 450],
       [570, 480, 350, 470, 340],
       [480, 330, 570, 460, 550]])
cost_list.append(cost/10)

cost=np.array([[320, 350, 410, 440, 350],
       [460, 360, 550, 410, 510],
       [500, 590, 520, 500, 490],
       [380, 480, 480, 560, 560],
       [370, 310, 590, 560, 390]])
cost_list.append(cost/10)

cost=np.array([[570, 520, 400, 550, 330],
       [400, 410, 450, 410, 310],
       [410, 460, 480, 350, 590],
       [470, 300, 320, 330, 380],
       [360, 320, 520, 490, 560]])
cost_list.append(cost/10)

cost=np.array([[440, 430, 420, 390, 590],
       [550, 530, 360, 300, 510],
       [370, 580, 560, 440, 390],
       [530, 520, 360, 450, 530],
       [350, 390, 590, 540, 380]])
cost_list.append(cost/10)

cost=np.array([[500, 300, 560, 410, 590],
       [310, 590, 450, 540, 380],
       [350, 480, 550, 340, 440],
       [450, 370, 590, 470, 430],
       [340, 490, 520, 360, 440]])
cost_list.append(cost/10)

cost=np.array([[460, 570, 440, 430, 570],
       [440, 530, 540, 390, 590],
       [520, 440, 370, 530, 330],
       [470, 350, 440, 360, 440],
       [440, 440, 540, 500, 330]])
cost_list.append(cost/10)

cost=np.array([[380, 300, 320, 460, 500],
       [450, 310, 380, 460, 450],
       [460, 560, 580, 360, 380],
       [390, 420, 360, 350, 440],
       [340, 470, 440, 370, 320]])
cost_list.append(cost/10)

cost=np.array([[420, 530, 320, 500, 360],
       [350, 320, 420, 460, 570],
       [410, 370, 390, 550, 480],
       [520, 520, 320, 430, 380],
       [570, 520, 560, 310, 580]])
cost_list.append(cost/10)

cost=np.array([[480, 500, 540, 560, 400],
       [300, 440, 340, 350, 410],
       [400, 360, 340, 350, 560],
       [430, 540, 520, 440, 420],
       [370, 440, 530, 410, 400]])
cost_list.append(cost/10)

cost=np.array([[430, 550, 570, 300, 440],
       [330, 350, 580, 570, 390],
       [320, 410, 500, 510, 380],
       [560, 450, 310, 340, 350],
       [490, 590, 340, 340, 420]])
cost_list.append(cost/10)

cost=np.array([[430, 420, 330, 340, 520],
       [410, 440, 380, 390, 410],
       [310, 510, 450, 410, 470],
       [590, 420, 580, 510, 320],
       [310, 530, 450, 430, 560]])
cost_list.append(cost/10)

cost=np.array([[430, 300, 350, 380, 410],
       [370, 380, 470, 480, 420],
       [320, 340, 420, 340, 460],
       [580, 490, 500, 440, 510],
       [590, 450, 570, 330, 400]])
cost_list.append(cost/10)

cost=np.array([[470, 570, 350, 560, 570],
       [430, 510, 300, 490, 400],
       [400, 430, 470, 320, 480],
       [500, 360, 360, 590, 420],
       [310, 510, 380, 300, 370]])
cost_list.append(cost/10)

cost=np.array([[460, 580, 510, 380, 500],
       [430, 540, 350, 450, 300],
       [360, 440, 560, 400, 550],
       [590, 420, 550, 490, 390],
       [500, 520, 420, 380, 430]])
cost_list.append(cost/10)

cost=np.array([[570, 480, 420, 590, 560],
       [300, 370, 360, 330, 500],
       [550, 410, 430, 560, 420],
       [370, 440, 330, 380, 490],
       [340, 460, 300, 540, 560]])
cost_list.append(cost/10)

cost=np.array([[330, 460, 540, 380, 530],
       [430, 460, 390, 560, 470],
       [340, 470, 560, 400, 350],
       [560, 450, 550, 570, 550],
       [590, 520, 310, 340, 590]])
cost_list.append(cost/10)

cost=np.array([[350, 590, 570, 470, 560],
       [520, 360, 400, 570, 430],
       [470, 500, 300, 560, 390],
       [300, 460, 570, 380, 350],
       [320, 400, 420, 500, 340]])
cost_list.append(cost/10)

cost=np.array([[380, 510, 560, 300, 340],
       [500, 460, 570, 470, 460],
       [470, 310, 420, 300, 590],
       [370, 330, 500, 450, 440],
       [300, 310, 490, 390, 520]])
cost_list.append(cost/10)

cost=np.array([[500, 460, 490, 570, 520],
       [300, 490, 490, 410, 370],
       [550, 300, 310, 590, 470],
       [470, 470, 450, 330, 370],
       [330, 350, 460, 390, 570]])
cost_list.append(cost/10)

cost=np.array([[590, 510, 430, 450, 390],
       [370, 510, 530, 540, 410],
       [460, 520, 590, 490, 580],
       [550, 450, 510, 580, 470],
       [360, 380, 530, 540, 320]])
cost_list.append(cost/10)

cost=np.array([[480, 580, 360, 490, 490],
       [440, 570, 440, 590, 560],
       [330, 360, 580, 500, 570],
       [360, 590, 520, 550, 570],
       [560, 450, 560, 410, 560]])
cost_list.append(cost/10)

cost=np.array([[420, 320, 500, 560, 320],
       [350, 420, 580, 390, 450],
       [350, 540, 470, 400, 530],
       [590, 590, 550, 410, 360],
       [330, 540, 540, 450, 380]])
cost_list.append(cost/10)

cost=np.array([[440, 430, 550, 520, 470],
       [510, 380, 460, 530, 580],
       [580, 580, 390, 330, 300],
       [530, 360, 340, 450, 480],
       [330, 360, 530, 560, 320]])
cost_list.append(cost/10)

cost=np.array([[510, 340, 370, 450, 590],
       [510, 340, 430, 380, 450],
       [370, 500, 460, 490, 490],
       [430, 500, 360, 360, 550],
       [320, 380, 350, 590, 330]])
cost_list.append(cost/10)

cost=np.array([[380, 480, 370, 390, 540],
       [400, 440, 450, 380, 310],
       [450, 470, 470, 360, 390],
       [470, 590, 560, 350, 390],
       [360, 540, 340, 480, 380]])
cost_list.append(cost/10)

cost=np.array([[500, 540, 490, 350, 300],
       [390, 330, 350, 320, 390],
       [350, 450, 350, 350, 390],
       [360, 520, 490, 470, 590],
       [320, 530, 340, 460, 300]])
cost_list.append(cost/10)

cost=np.array([[530, 560, 310, 500, 590],
       [530, 440, 450, 440, 400],
       [350, 340, 370, 590, 470],
       [430, 520, 360, 580, 310],
       [500, 570, 360, 490, 360]])
cost_list.append(cost/10)

cost=np.array([[480, 520, 530, 340, 520],
       [470, 590, 470, 370, 330],
       [470, 450, 310, 520, 350],
       [460, 460, 500, 550, 440],
       [470, 380, 540, 430, 370]])
cost_list.append(cost/10)

cost=np.array([[570, 360, 330, 570, 590],
       [360, 320, 530, 510, 520],
       [360, 300, 500, 470, 550],
       [360, 460, 350, 480, 590],
       [320, 480, 390, 530, 580]])
cost_list.append(cost/10)

cost=np.array([[300, 400, 440, 590, 540],
       [550, 420, 420, 300, 540],
       [440, 350, 570, 420, 310],
       [540, 370, 470, 500, 360],
       [430, 390, 520, 420, 310]])
cost_list.append(cost/10)

cost=np.array([[310, 540, 360, 300, 580],
       [520, 560, 580, 560, 450],
       [540, 400, 320, 500, 500],
       [400, 580, 530, 440, 360],
       [440, 310, 540, 480, 300]])
cost_list.append(cost/10)

cost=np.array([[380, 510, 380, 320, 510],
       [310, 370, 420, 480, 350],
       [410, 560, 330, 450, 520],
       [340, 350, 530, 560, 520],
       [350, 570, 510, 450, 540]])
cost_list.append(cost/10)

cost=np.array([[430, 420, 340, 480, 390],
       [540, 470, 350, 510, 310],
       [380, 310, 470, 400, 310],
       [450, 310, 410, 460, 430],
       [420, 580, 380, 590, 420]])
cost_list.append(cost/10)

cost=np.array([[470, 590, 590, 420, 530],
       [550, 360, 360, 560, 480],
       [470, 540, 480, 560, 520],
       [350, 530, 390, 570, 490],
       [540, 550, 480, 340, 550]])
cost_list.append(cost/10)

cost=np.array([[340, 360, 550, 340, 570],
       [510, 570, 570, 490, 430],
       [400, 460, 480, 590, 530],
       [570, 550, 520, 460, 480],
       [580, 590, 550, 370, 420]])
cost_list.append(cost/10)

cost=np.array([[350, 410, 490, 360, 520],
       [540, 540, 470, 520, 480],
       [370, 360, 300, 350, 490],
       [530, 390, 530, 550, 370],
       [580, 450, 360, 560, 510]])
cost_list.append(cost/10)



# print(len(cost_list))

r = Tk()
r.withdraw()
r.clipboard_clear()

import pickle
#import dill as pickle
with open(SAVED_QUESTION, 'wb') as f:
    pickle.dump(cost_list, f)

with open(SAVED_QUESTION, 'rb') as f:
    cost_list_loaded = pickle.load(f)

count_max = 0
count_max_list = []

# for i, cost in enumerate(cost_list_loaded):
#     success = False

    # if is_qualified_question(cost):
    #     print("i", i)
    #     count_max += 1
    # else:

def generate_problem():
    n = 0
    mem_cost_list = []
    while n < 100:
        cost = np.random.randint(30,60,(5,5))
        cost = cost * 10
        if is_qualified_question(cost, mem_cost_list):
            n += 1
            mem_cost_list.append(cost/10)

#generate_problem()

for i, cost in enumerate(cost_list_loaded):
    template = latex_jinja_env.get_template('/utils/assignment_problem.tex')

    from scipy.optimize import linear_sum_assignment

    cost = cost * 10
    row_ind, col_ind = linear_sum_assignment(cost*(-1))
    result = cost[row_ind, col_ind].sum()

    c = cost.tolist()
    n, m = np.shape(cost)

    tex = template.render(
           show_question=True,
           show_answer=True,
           show_blank=True,
           show_blank_answer=True,
           blank_desc=u"最优派遣可实现的总销售额为",
           cost=c,
           n=n,
           m=m,
           person_str=u"经理",
           task_str=u"地区",
           cost_str=u"销售额",
           problem_description_pre = (
               u"某公司有%(n)d名销售经理，欲派遣到%(m)d个地区去，经评估他们到各地的销售额如下表所示."
               % {"m":m, "n": n}),
           result=result,
    )

    r.clipboard_append(tex)
    count_max += 1


#print(success)
print("count_max:", count_max)

# with open(SAVED_QUESTION, 'wb') as f:
#     pickle.dump(cost_list, f)

