{% from "latex.jinja" import mytabular_preamble as preamble %}
\BLOCK{- if show_question -}
\BLOCK{- if pre_description -}
\VAR{pre_description}
\BLOCK{- else -}
有线性规划规划问题
\BLOCK{- endif -} \#{ pre_description }

\BLOCK{ if lp }
$$\begin{alignat*}{20}
\VAR{lp.get_goal_str()}\\
\text{s.t.}\quad
\BLOCK{ for c in lp.constraints_str_list }
\VAR{c}
\BLOCK{ endfor }
\VAR{lp.sign_str}
\end{alignat*}$$
\BLOCK{ endif }

\BLOCK{ if after_description -}
\VAR{after_description}
\BLOCK{ endif -} \#{ after_description }


\BLOCK{ if simplex_pre_description -}
\VAR{simplex_pre_description}
\BLOCK{ endif } \#{ simplex_pre_description }


\BLOCK{ if standardized_lp }
$$\begin{alignat*}{20}
\VAR{standardized_lp.get_goal_str()}\\
\text{s.t.}\quad
\BLOCK{ for c in standardized_lp.constraints_str_list }
\VAR{c}
\BLOCK{ endfor }
\VAR{standardized_lp.sign_str}
\end{alignat*}$$
\BLOCK{ endif }
用单纯形法求解得到最优表如下：

<p align="middle"><strong>表\VAR{question_table_iters.next()}</strong></br>
{% call latex(compiler="pdflatex", image_format="png", tex_preamble=preamble)  %}
\begin{table}[H]\centering
\begin{tabular}{c|c|\BLOCK{ for x in range(0, lp.solutionPhase2.all_variable_str_list|length) }C{1cm}\BLOCK{ endfor }|c}\hline\hline
\multicolumn{2}{c|}{$c_j$}\BLOCK{ for c in lp.solutionPhase2.goal_str_list }&\VAR{c}\BLOCK{ endfor }&\multirow{2}*{$\mathbf{b}$} \\ \cline{1-\VAR{lp.solutionPhase2.all_variable_str_list|length + 2 }}
$\mathbf{C_B}$&$\mathbf{X_B}$\BLOCK{ for x in lp.solutionPhase2.all_variable_str_list }&\VAR{x}\BLOCK{ endfor }&\\ \hline
\BLOCK{ if show_only_opt_table }\BLOCK{ set count=lp.solutionPhase2.tableau_str_list|length -1 }\BLOCK{ else }\BLOCK{ set count=0 }\BLOCK{ endif }
\BLOCK{ for i in range(count, lp.solutionPhase2.tableau_str_list|length) }
\BLOCK{ for j in range(0, lp.solutionPhase2.cb_str_list[i]|length + 1) }
\BLOCK{ if not loop.last } \VAR{lp.solutionPhase2.cb_str_list[i][j]}&\VAR{lp.solutionPhase2.xb_str_list[i][j]}&\BLOCK{ else } \multicolumn{2}{c|}{$\bar c_j$}& \BLOCK{ endif } \VAR{lp.solutionPhase2.tableau_str_list[i][j]|join("&") } \\
\BLOCK{- if loop.revindex0 <= 1 } \hline \BLOCK{ endif }

\BLOCK{ endfor }
\BLOCK{ endfor }
\hline\end{tabular}
\end{table}%
{% endcall %}
</p>

用线性规划的灵敏度分析求解以下问题:

\BLOCK{ endif } \#{ show_question }

\BLOCK{ if lp.sa_result }
\BLOCK{ for result in  lp.sa_result}
\BLOCK{ set outer_loop = loop }
\BLOCK{ if show_answer}<hr>\BLOCK{ endif }
<strong>(\VAR{loop.index}).</strong> \VAR{result.description}

\BLOCK{ if show_answer}
<div style="margin-left:2em;">
\BLOCK{ if outer_loop.first }（<strong>注：</strong>最优表中的$\mathbf{B^{-1}}=\VAR{result.B_1}$，下同.）<br/>

\BLOCK{ endif }


<strong>解：</strong>
\BLOCK{ if result.answer }
\BLOCK{- for ans in result.answer }

\BLOCK{- if ans.answer_description } \VAR{ans.answer_description} \BLOCK{ endif }
\BLOCK{ if ans.change }

<p align="middle"><strong>答案表\VAR{answer_table_iters.next()}</strong></br>
{% call latex(compiler="pdflatex", image_format="png", tex_preamble=preamble)  %}
\begin{keytable}[H]\centering
\begin{tabular}{c|c|\BLOCK{ for x in range(0, ans.new_lp.solutionPhase2.all_variable_str_list|length) }
\BLOCK{ if ans.new_lp.need_artificial_variable }C{1.5cm}\BLOCK{ else }C{1cm}\BLOCK{ endif }
\BLOCK{ endfor }|c}\hline\hline
\multicolumn{2}{c|}{$c_j$}\BLOCK{ for c in ans.new_lp.solutionPhase2.goal_str_list }&\VAR{c}\BLOCK{ endfor }&\multirow{2}*{$\mathbf{b}$} \\ \cline{1-\VAR{ans.new_lp.solutionPhase2.all_variable_str_list|length + 2 }}
$\mathbf{C_B}$&$\mathbf{X_B}$\BLOCK{ for x in ans.new_lp.solutionPhase2.all_variable_str_list }&\VAR{x}\BLOCK{ endfor }&\\ \hline
\BLOCK{ for i in range(0, ans.new_lp.solutionPhase2.tableau_str_list|length) }
\BLOCK{ for j in range(0, ans.new_lp.solutionPhase2.cb_str_list[i]|length + 1) }
\BLOCK{ if not loop.last } \VAR{ans.new_lp.solutionPhase2.cb_str_list[i][j]}&\VAR{ans.new_lp.solutionPhase2.xb_str_list[i][j]}&\BLOCK{ else } \multicolumn{2}{c|}{$\bar c_j$}& \BLOCK{ endif } \VAR{ans.new_lp.solutionPhase2.tableau_str_list[i][j]|join("&") } \\
\BLOCK{- if loop.revindex0 <= 1 } \hline \BLOCK{ endif }

\BLOCK{ endfor }
\BLOCK{ endfor }
\hline\end{tabular}
\end{keytable}%
{% endcall %}
</p>

\BLOCK{ if ans.new_lp.solve_opt_res_str -}新的最优解\BLOCK{ if ans.new_lp.solve_status==0.1}(有无穷多个，其中一个)\BLOCK{ endif }为\VAR{ans.new_lp.solve_opt_res_str}\BLOCK{ endif -}.

\BLOCK{ endif }\#{ ans.change }
\BLOCK{ if not loop.last }<br/><br/>\BLOCK{ endif }
\BLOCK{ endfor }\#{ ans loop }

\BLOCK{ endif }
</div>
\BLOCK{- endif } \#{ show_answer }
\BLOCK{ endfor }\#{ lp.sa_result loop }
\BLOCK{- endif } \#{ lp.sa_result }



\BLOCK{- if show_answer}

\BLOCK{- endif } \#{ show_answer }