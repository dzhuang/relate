\BLOCK{- if show_question -}
HL公司现有资金\VAR{dp.total_resource}万元，拟用于对\VAR{dp.project_list|length}个下属子公司投资。各子公司可采取的投资方案（投资额）和相应的收益$g_k$ 如下表。
表中被划去的单元格表示不存在相应的投资方案。问：如何分配投资资金(**不要求资金全部使用完**)，可使总收益最大？

{% from "latex.jinja" import mytabular_preamble as preamble %}

<p align="middle"></br>
{% call latex(compiler="pdflatex", image_format="png", tex_preamble=preamble)  %}
\begin{table}[H]
 \centering
 \topcaption{}
 \begin{mytabular}{c|\BLOCK{for d in dp.decision_set}c\BLOCK{if not loop.last}|\BLOCK{endif}\BLOCK{endfor}}
 \hline\hline
\diagbox{子公司}{收益$g_k$}{投资额}&\VAR{dp.decision_set|join("&")}\\ \hline
\BLOCK{for idx in range(dp.project_list|length)}
\VAR{dp.project_list[idx]}&\VAR{dp.gain_str_list[idx]|join("&")}\\ \hline
\BLOCK{endfor}
 \hline
 \end{mytabular}
 \end{table}
 {% endcall %}
</p>
\BLOCK{endif} \#{show_question}

\BLOCK{if after_question_description}\VAR{after_question_description}\BLOCK{endif}

\BLOCK{if show_answer_explanation}
<hr>
<hr>
详细的建模和求解过程：
<hr>
#### 1、动态规划建模

{% from "latex.jinja" import mytabular_preamble as preamble %}
{% from "latex.jinja" import question_preamble as math_preamble %}

(1) 阶段数$n=\VAR{dp.n_stages}$，对子公司$k$投资为第$k$阶段。$k=\VAR{range(1, dp.n_stages+1)|join(",")}$；

(2) 状态变量$s_k$为第$k$阶段初**尚未投资的金额**，则$s_1=\VAR{dp.total_resource}$（亦即$S_1=\{\VAR{dp.total_resource}\}$）；

(3) 决策变量$x_k$为第$k$阶段对子公司$k$的投资额，$k=\VAR{range(1, dp.n_stages+1)|join(",")}$；

(4) 状态转移方程为：
$$
\begin{align*}
 &s_{k+1}=s_k-x_k, ~~k=\VAR{range(1, dp.n_stages+1)|join(",")}
\end{align*}
$$其中$s_1=\VAR{dp.total_resource}$；

(5) 动态规划基本方程为：
<p align="middle">
{% call latex(compiler="pdflatex", image_format="png", tex_preamble=math_preamble)  %}
\large
\VAR{dp.get_formula_tex()}
{% endcall %}
</p>
其中，阶段指标$g_k(s_k, x_k)$为第$k$阶段向子公司$k$投资$x_k$产生的收益。
</br>
<hr>
\BLOCK{endif}\#{show_answer_explanation}
