{% extends "course/home.html" %}
{% load i18n %}

  {% block cover %}
  <div class="jumbotron">
    <h1>{% blocktrans with RELATE=relate_site_name %} Welcome to {{ RELATE }} {% endblocktrans %}</h1>
  </div>
  {% endblock %}

{% block course_list %}
  {% if current_courses or past_courses %}
    {% block current_course_list %}
    {% if current_courses %}
      <h2 class="page-header">{% trans "Open courses" %}</h2>
      <div class="row">
        {% for course in current_courses %}
          <div class="col-md-4">
            <h3>{{course.name}}</h3>
            <p>{{course.number}} {{course.time_period}}</p>
            <p><a class="btn btn-default" href="{% url 'relate-course_page' course.identifier %}" role="button">{% trans "View" %} &raquo;</a></p>
          </div>
        {% endfor %}
      </div>
    {% endif %}
    {% if inprogress_courses %}
      <h2 class="page-header">{% trans "My Courses in Progress" %}</h2>
      <div class="row">
        {% for course in inprogress_courses %}
          <div class="col-md-4">
            <h3>{{course.name}}</h3>
            <p>{{course.number}} {{course.time_period}}</p>
            <p><a class="btn btn-default" href="{% url 'relate-course_page' course.identifier %}" role="button">{% trans "View" %} &raquo;</a></p>
          </div>
        {% endfor %}
      </div>
    {% endif %}
    {% endblock %}
    {% if past_courses %}
      {% block past_course_list %}
      <h2 class="page-header">{% trans "My Past Courses" %}</h2>
      <table class="table table-condensed">
        <tr>
          <th>{% trans "Course number" %}</th>
          <th></th>
          <th>{% trans "Course name" %}</th>
          <th>{% trans "Time" context "The start and end time of a course" %}</th>
        </tr>
        {% for course in past_courses %}
          <tr
             {% if not course.accepts_enrollment or course.hidden %}
                class="text-muted"
             {% endif %}
            >
            <td><a href="{% url 'relate-course_page' course.identifier %}">{{course.number}}</a>
            <td><a href="{% url 'relate-course_page' course.identifier %}">{{course.time_period}}</a>
            <td>{{course.name}}</td>
            <td>{% if course.start_date %}{{course.start_date}}{% endif %}{% if course.start_date or course.end_date %} - {% endif %}{% if course.end_date %}{{course.end_date}}{% endif %}</td>
          </tr>
        {% endfor %}
      </table>
      {% endblock %}
    {% endif %}
  {% else %}
    {% blocktrans trimmed with RELATE=relate_site_name %} There are no courses hosted on this {{ RELATE }} site. {% endblocktrans %}
    {% if not user.is_authenticated %}
      {% url "relate-sign_in_by_user_pw" as relate-sign_in_by_user_pw %}
      {% blocktrans trimmed %}
        <a href="{{ relate-sign_in_by_user_pw }}">Sign in</a> to get started.
      {% endblocktrans %}
    {% endif %}
  {% endif %}
  {% if user.is_staff %}
    <hr>
    <a class="btn btn-primary" href="{% url 'relate-set_up_new_course' %}"" role="button">{% trans "Set up new course" %} &raquo;</a></p>
  {% endif %}
{% endblock %}
