{% extends 'jfu/upload_form.html' %}
{% load i18n %}

{% block CSS_BOOTSTRAP %}{# BOOTSTRAP css (Override to keep it empty) #}{% endblock %}
{% block JS_JQUERY %}{#jQuery (Override to keep it empty) {% endcomment #}{% endblock %}
{% block CSS_HTML5_SHIM %}{# IE 9 lt already supported (Override to keep it empty)#}{% endblock %}

{% block CSS_EXTRA %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}css/imgupload-page.css">
<link rel="stylesheet" href="{{ STATIC_URL }}cropperjs/dist/cropper.css">
{% endblock %}

{% block JS_DOWNLOAD_TEMPLATE_PREVIEW_THUMBNAIL_EXTRA_ATTR %}
    id="thumbnail{{ JQ_OPEN }}=file.pk{{ JQ_CLOSE }}"
{% endblock %}{# block JS_DOWNLOAD_TEMPLATE_PREVIEW_THUMBNAIL_EXTRA_ATTR #}

{% block JS_DOWNLOAD_TEMPLATE_DOWNLOAD_FILENAME_EXTRA_ATTR %}
    id="filename{{ JQ_OPEN }}=file.pk{{ JQ_CLOSE }}"
{% endblock %}{# block JS_DOWNLOAD_TEMPLATE_DOWNLOAD_FILENAME_EXTRA_ATTR #}

{% block JS_DOWNLOAD_TEMPLATE_EXTRA_COLUMN %}
    {% if SHOW_CREATION_TIME %}
        <td>
            <span
                class="time"
                title="{% trans 'Created at' %} {{ JQ_OPEN }}=file.creationTime{{ JQ_CLOSE }}{{ JQ_OPEN }} if (file.modifiedTimeShort) { {{ JQ_CLOSE }}, {% trans 'modified at' %} {{ JQ_OPEN }}=file.modifiedTime{{ JQ_CLOSE }}{{ JQ_OPEN }} } {{ JQ_CLOSE }}"
            >
                {{ JQ_OPEN }}=file.creationTimeShort{{ JQ_CLOSE }}{{ JQ_OPEN }} if (file.modifiedTimeShort) { {{ JQ_CLOSE }} ({{ JQ_OPEN }}=file.modifiedTimeShort{{ JQ_CLOSE }}){{ JQ_OPEN }} } {{ JQ_CLOSE }}
            </span>
        </td>
    {% endif %}
{% endblock %}{# //JS_DOWNLOAD_TEMPLATE_EXTRA_COLUMN #}

{% block JS_DOWNLOAD_TEMPLATE_DELETE_EXTRA_BUTTON %}
    <a 
        class="btn btn-success btn-edit-image"
        data-toggle="modal"
        href="{{ JQ_OPEN }}=file.updateUrl{{ JQ_CLOSE }}"
        data-target="#modal"
    >
        <i class="fa fa-pencil"></i>
        <span>{% trans "Edit" %}</span>
    </a>
{% endblock %}{# //block JS_DOWNLOAD_TEMPLATE_DELETE_EXTRA_BUTTON #}

{% block JS_BOOTSTRAP %}{# BOOTSTRAP js (Override to keep it empty) #}{% endblock %}

{% block UPLOAD_FORM %}
{% load i18n crispy_forms_tags %}
{% crispy form %}
{% endblock %}

{% block JS_OPTS %}
imageMaxWidth: 900,
imageMaxHeight: 900,
loadImageFileTypes: /^image\/(gif|jpeg|png|svg\+xml)$/,
sequentialUploads: true,
disableImageResize: /Android(?!.*Chrome)|Opera/
    .test(window.navigator && navigator.userAgent),

imageCrop: false, // Force cropped images
acceptFileTypes: /(\.|\/)(png|gif|jpe?g)$/i,
messages: {
                acceptFileTypes: '不允许的文件类型'
            },
imageOrientation: true
{% endblock %}


{% block JS_EXTRA %}
{{ block.super }}
<script src="{% url 'javascript-catalog-image-upload' %}"></script>
<script src="{{ STATIC_URL }}cropperjs/dist/cropper.js"></script>
<script src="{{ STATIC_URL }}js/imgupload-page.js"></script>
{% endblock %}

{% block JS_UPLOAD_TEMPLATE %}{% endblock %}
{% block JS_DOWNLOAD_TEMPLATE %}{% endblock %}
